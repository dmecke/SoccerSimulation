<!DOCTYPE html>
<html>
    <head>
        <title>Node.js</title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
        <script src="https://raw.github.com/caleb531/jcanvas/master/jcanvas.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="http://nodejs.playground.cunningsoft.de:8000/socket.io/socket.io.js"></script>
        <script type="text/javascript" src="jCanvas.js"></script>
        <script type="text/javascript">
var socketServer = io.connect('http://nodejs.playground.cunningsoft.de:8000');
socketServer.on('updateMessageList', function(msg) {
    console.log(msg);
    $('#messages').append('<li>' + msg + '</li>');
});
socketServer.on('tick', function(message) {
    var players = $.parseJSON(message);
    $('#canvas').clearCanvas();
    $.each(players, function(index, player) {
        $('#canvas').drawPlayer({
            strokeStyle: player.color,
            x: player.position.x,
            y: player.position.y,
            angle: player.angle,
            radius: 20
        }).drawArc({
            strokeStyle: player.color,
            x: player.position.x,
            y: player.position.y,
            radius: 1
        }).drawArc({
            strokeStyle: player.color,
            x: player.position.x,
            y: player.position.y,
            radius: 20
        });
    });
});
function sendMessage() {
    socketServer.emit('newMessage', $('#textField').val());
    $('#textField').val('');
}
        </script>
    </head>
    <body>
        <input type="text" onsubmit="sendMessage()" id="textField" />
        <input type="button" onclick="sendMessage()" value="send" />
        <ul id="messages">
        </ul>
        <canvas id="canvas" width="600" height="400"></canvas>
    </body>
</html>
