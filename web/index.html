<!DOCTYPE html>
<html>
    <head>
        <title>Node.js</title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="http://nodejs.playground.cunningsoft.de:8000/socket.io/socket.io.js"></script>
        <script type="text/javascript">
var io = io.connect('http://nodejs.playground.cunningsoft.de:8000');
io.on('render', function(pitch) {
    console.log(pitch);

    $('#teamStateRed').html(pitch.teams[0].state);
    $('#teamStateBlue').html(pitch.teams[1].state);
    $('#playerStateRed1').html(pitch.teams[0].players[0].state);
    $('#playerStateRed2').html(pitch.teams[0].players[1].state);
    $('#playerStateRed3').html(pitch.teams[0].players[2].state);
    $('#playerStateRed4').html(pitch.teams[0].players[3].state);
    $('#playerStateRed5').html(pitch.teams[0].players[4].state);
    $('#playerStateBlue1').html(pitch.teams[1].players[0].state);
    $('#playerStateBlue2').html(pitch.teams[1].players[1].state);
    $('#playerStateBlue3').html(pitch.teams[1].players[2].state);
    $('#playerStateBlue4').html(pitch.teams[1].players[3].state);
    $('#playerStateBlue5').html(pitch.teams[1].players[4].state);

    var canvas = document.getElementById('canvas');
    var context = canvas.getContext('2d');

    canvas.width = canvas.width;

    context.fillStyle = 'rgba(255, 255, 255, 100)';
    context.fillRect(pitch.ball.position.x - 5, pitch.ball.position.y - 5, 10, 10);
    context.fillRect(pitch.ball.headingPosition.x, pitch.ball.headingPosition.y, 1, 1);
    context.fillRect(pitch.ball.currentTarget.x - 2, pitch.ball.currentTarget.y - 2, 4, 4);

    $.each(pitch.teams, function(teamIndex, team) {
        $.each(team.players, function(playerIndex, player) {
            context.fillStyle = player.color;
            context.fillRect(player.position.x - 10, player.position.y - 10, 20, 20);

//            context.beginPath();
//            context.arc(player.position.x, player.position.y, 50, 0, 2 * Math.PI);
//            context.stroke();

            context.fillRect(player.headingPosition.x, player.headingPosition.y, 1, 1);

            context.fillRect(player.currentTarget.x - 2, player.currentTarget.y - 2, 4, 4);

            context.strokeText(player.state, player.position.x, player.position.y + 4);
        });
    });
});
        </script>
    </head>
    <body>
        <canvas id="canvas" width="1200" height="600" style="background: #d3d3d3; float: left"></canvas>
    <table>
        <tr>
            <td><b>Team State Red</b></td>
            <td id="teamStateRed"></td>
        </tr>
        <tr>
            <td><b>Team State Blue</b></td>
            <td id="teamStateBlue"></td>
        </tr>
        <tr>
            <td><b>Player State Red 1</b></td>
            <td id="playerStateRed1"></td>
        </tr>
        <tr>
            <td><b>Player State Red 2</b></td>
            <td id="playerStateRed2"></td>
        </tr>
        <tr>
            <td><b>Player State Red 3</b></td>
            <td id="playerStateRed3"></td>
        </tr>
        <tr>
            <td><b>Player State Red 4</b></td>
            <td id="playerStateRed4"></td>
        </tr>
        <tr>
            <td><b>Player State Red 5</b></td>
            <td id="playerStateRed5"></td>
        </tr>
        <tr>
            <td><b>Player State Blue 1</b></td>
            <td id="playerStateBlue1"></td>
        </tr>
        <tr>
            <td><b>Player State Blue 2</b></td>
            <td id="playerStateBlue2"></td>
        </tr>
        <tr>
            <td><b>Player State Blue 3</b></td>
            <td id="playerStateBlue3"></td>
        </tr>
        <tr>
            <td><b>Player State Blue 4</b></td>
            <td id="playerStateBlue4"></td>
        </tr>
        <tr>
            <td><b>Player State Blue 5</b></td>
            <td id="playerStateBlue5"></td>
        </tr>
    </table>
    </body>
</html>
